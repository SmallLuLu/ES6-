<!--
 * @Description: 
 * @Version: 2.0
 * @Autor: Luyh
 * @Date: 2020-08-06 15:57:55
 * @LastEditors: Luyh
 * @LastEditTime: 2020-08-06 16:31:18
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <ul class="nav">
        <li>榴莲</li>
        <li>臭豆腐</li>
        <li>鹬鸵</li>
        <li>大猪蹄子</li>
    </ul>
    <script>
        // 什么是闭包(closure)？闭包指有权访问另外一个函数作用域中变量的函数
        // 简单理解就是一个作用域可以访问另外一个函数内部的局部变量
        // 我们fun这个函数作用域 访问了另外一个函数 fn里面num
        // 闭包的主要作用：延伸了变量的作用范围
        function fn(){
            var num =10;
            // function fun(){
            //     console.log(num);
            // };
            // return fun();
            return function(){
                console.log(num);
            }
        }
        var f=fn();

        f();
        // 类似于
        // var f= function(){
        //     console.log(num);
        // }

        // 闭包的作用
        // 我们fn 外面的作用域可以访问fn 内部的局部变量

        // 闭包实例
        {
            // 闭包应用 点击li输出当前li的索引号
            // 1.我们可以利用动态添加属性的方法
            let lis = document.querySelectorAll('.nav li');
            // for(var i =0;i<lis.length;i++){
            //     lis[i].index=i;
            //     lis[i].onclick=function(){
            //         console.log(i);
            //     }
            // }
            // 2.利用闭包的方法得到当前小li的索引号
                // 立即执行函数也称为小闭包 因为立即执行函数里面的任何一个函数都可以使用它的i这变量
            // for(var i =0;i<lis.length;i++){
            //     (function(i){
            //         lis[i].onclick=function(){
            //             console.log(i);
            //         }
            //     })(i)
            // }

            // 3.let

            // for(let i =0;i<lis.length;i++){
            //     lis[i].onclick=function(){
            //         console.log(i);
            //     }
            // }

        }

        // 闭包应用- 3秒之后打印所有li元素的内容
        {
            let lis = document.querySelectorAll('.nav li');  
            // for(let i =0;i<lis.length;i++){
            //     setTimeout(function(){
            //         console.log(lis[i].innerHTML);
            //     },3000)
            // }   
            for(var i=0;i<lis.length;i++){
                (function(i){
                    setTimeout(function(){
                        console.log(lis[i].innerHTML);
                    },3000)
                })(i)
            }
        }
        // 闭包应用-计算打车价格
        {
            //打车起步价13(3公里内),之后每多一公里增加 5块钱 用户输入公里数就可以计算打车价格
            // 如果有拥堵情况,总价格多收取10块钱拥堵费
             






        }
    </script>
</body>
</html>