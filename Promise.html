<!--
 * @Description: 
 * @Version: 2.0
 * @Autor: Luyh
 * @Date: 2020-08-03 10:28:35
 * @LastEditors: Luyh
 * @LastEditTime: 2020-08-20 12:40:22
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // function timeout(ms){
        //     return new Promise((resolve,reject)=>{
        //         setTimeout(resolve,ms,'done');
        //     });
        // }
        // timeout(100).then((value)=>{
        //     console.log(value)
        // })

        // const p1=new Promise((resolve,reject)=>{
        //     setTimeout(()=>{console.log('p1')},1000)
        // });
        // const p2=new Promise((resolve,reject)=>{
        //     setTimeout(()=>{
        //         console.log('p2');
        //         resolve(p1)
        //     },3000)
        // })
        // p2.then(result=>{console.log(result)}).catch(error=>{console.log(error)})
        let promise = new Promise(function (resolve, reject) {
            setTimeout(()=>{
                console.log('Promise');
                resolve();
            },1000)
        });

        promise.then(function () {
            console.log('resolved.');
        });

        // const ajaxPromise=(url,async,method,dataType,data)=>{
        //     return new Promise((resolve,reject)=>{
        //         $.ajax({
        //             url:url,
        //             async:async,
        //             method:method,
        //             dataType:dataType,
        //             data:data,
        //             success:function(data){
        //                 resolve(data)
        //             },
        //             error:function(error){
        //                 reject(error)
        //             }
        //         })
        //     })
        // };
        // ajaxPromise('www.baidu.com',true,'GET','json',{})
        // .then(function(data){
        //     console.log(data);
        //     if(data.code==200){
        //         ajaxPromise('www.baidu.com',true,'GET','json',{})
        //     }else{

        //     }
        // },function(error){
        //     console.log(error);
        // })
        // .then(function(data){

        // },function(error){})

        // let promise = new Promise((resolve, reject) => {
        //     console.log('Promise');
        //     resolve()
        // });
        // promise.then((data) => { console.log('resolve') });
        // console.log('Hi');

        // // console.log('-------------------------------')
        // const p1 = new Promise((resolve, reject) => {
        //     setTimeout(() => { reject(new Error('fail')) }, 3000)
        // })
        // const p2 = new Promise((resolve, reject) => {
        //     setTimeout(() => { resolve(p1) }, 1000)
        // })
        // p2.then(result => { console.log(result) }).catch(error => { console.log(error) })

        // const catchPromise = new Promise((resolve, reject) => {
        //     throw new Error('test')
        // });
        // catchPromise.catch(function (error) { console.log(error) })

        // const catchPromise1 = new Promise((resolve, reject) => {
        //     resolve('ok');
        //     throw new Error('test');
        // });
        // catchPromise1.then((resolve) => { console.log(resolve) }).catch((error) => { console.log(error) });


        // // const someAsyncThing = function () {
        // //     return new Promise(function (resolve, reject) {
        // //         // 下面一行会报错，因为x没有声明
        // //         resolve(x + 2);
        // //     });
        // // };

        // // someAsyncThing().then(function () {
        // //     console.log('everything is great');
        // // });

        // // setTimeout(() => { console.log(123) }, 2000);

        // const someAsyncThing = function () {
        //     return new Promise(function (resolve, reject) {
        //         // 下面一行会报错，因为x没有声明
        //         resolve(x + 2);
        //     });
        // };

        // someAsyncThing().then(function () {
        //     return someOtherAsyncThing();
        // }).catch(function (error) {
        //     console.log('oh no', error);
        //     // 下面一行会报错，因为 y 没有声明
        //     y + 2;
        // }).then(function () {
        //     console.log('carry on');
        // });

        // Promise--承诺 消除异步操作
        //  *用同步的方法书写异步

        // let p=new  Promise(function(resolve,reject){
        //     $.ajax({
        //         url:'arr.text',
        //         dataType:'json',
        //         sunccess:function(arr){
        //             resolve()
        //         },
        //         error:function (error){
        //             reject()
        //         }
        //     })
        // })

    </script>
</body>

</html>