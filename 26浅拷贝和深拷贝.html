<!--
 * @Description: 
 * @Version: 2.0
 * @Autor: Luyh
 * @Date: 2020-08-06 17:31:39
 * @LastEditors: Luyh
 * @LastEditTime: 2020-08-06 17:51:04
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 1.浅拷贝只是拷贝一层，更深层次对象级别的只拷贝引用
        {
            let obj = {
                id: 1,
                name: 'sss',
                msg: {
                    age: 18
                }
            }
            let o = {};
            // for(var k in obj){
            //     o[k]=obj[k]
            // }
            // console.log(o);
            // o.msg.age=20;
            // console.log(o);
            // console.log(obj);

            console.log('---------------------');
            Object.assign(o, obj);
            console.log(o);
        }

        // 2.深拷贝拷贝多层，每一级别的数据都会拷贝
        {
            let obj = {
                id: 1,
                name: 'sss',
                msg: {
                    age: 18
                },
                color:['pink','red']
            }
            let o = {};
            // 利用递归函数实现深拷贝
            // 封装函数
            function deepCopy(newobj,oldobj){
                for(var k in oldobj){
                    // 判断我们的属性值属于哪种数据类型
                    // 1.获取属性值 oldobj[k]
                    var item =oldobj[k];
                    // 2.判断这个值是否是数值
                    if(item instanceof Array){
                        newobj[k]=[];
                        deepCopy(newobj[k],item)
                    }
                    // 3.判断这个值是否是对象
                    else if(item instanceof Object){
                        newobj[k]={};
                        deepCopy(newobj[k],item)
                    }
                    // 4.属于简单数据类型
                    else{
                        newobj[k] = item;
                    }
                }
            }
            deepCopy(o,obj);
            console.log(o);
            o.msg.age=20;
            console.log(o);
            console.log(obj);
             
        }

        // 3.Object.assign(target,...souces) es6新增方法可以浅拷贝
        

    </script>
</body>

</html>